# plugins

Проекты внешних модулей ЛЭРС УЧЁТ.

## LERS Report Generator

Набор проектов для генерации отчётов из системы **ЛЭРС УЧЁТ** (система учёта энергоресурсов).

### Ключевая особенность

**Совместимость с любой версией ЛЭРС**

Проект компилируется локально на вашей машине, используя библиотеки установленного ЛЭРС.

**Преимущества:**
- Автоматическая совместимость с установленной версией ЛЭРС
- При обновлении ЛЭРС достаточно пересобрать плагин
- Автоматическая сборка через `install.bat` — скрипт самостоятельно находит библиотеки ЛЭРС и компилирует проект

**Пересборка после обновления ЛЭРС:**
```cmd
cd LersReportGeneratorPlugin
install.bat    # Правой кнопкой → Запустить от имени администратора
```

---

### Проекты

#### LersReportGeneratorPlugin

WinForms плагин для АРМ оператора ЛЭРС.


**Возможности:**
- Генерация отчётов ОДПУ (общедомовые приборы учёта)
- Генерация отчётов ИПУ (индивидуальные приборы учёта)

<img width="533" height="725" alt="screenshot_light" src="https://github.com/user-attachments/assets/a8bc327a-98be-47a8-a598-1960684285ea" />

- Работа с локальным и удалёнными серверами

<img width="533" height="323" alt="servers_light" src="https://github.com/user-attachments/assets/6b410923-28c9-49e7-a27e-b6987da73626" />

- Массовая генерация со всех серверов
- Экспорт в PDF/XLSX
- Импорт/экспорт серверов с шифрованием паролей

**Установка:**
1. Распаковать архив
2. В папке `LersReportGeneratorPlugin`: Правой кнопкой мыши на `install.bat` → Запустить от имени администратора
3. Перезапустить АРМ ЛЭРС
4. В АРМ: Администрирование → Внешние модули → Добавить из файла
5. Выбрать: `C:\Program Files\LERS\Client\Plugins\LersReportGeneratorPlugin\LersReportGeneratorPlugin.dll`
6. Плагин появится в меню: Сервис → Генератор отчётов

Скрипт install.bat автоматически соберёт и скопирует файлы в `C:\Program Files\LERS\Client\Plugins\`

#### LersReportProxy

Windows Service - прокси-служба для удалённых серверов ЛЭРС.

**Зачем нужна:**
- Расширяет REST API ЛЭРС (добавляет недостающие endpoints)
- Поддержка генерации ИПУ отчётов (не поддерживается в REST API)
- Получение отчётов точек одним запросом (вместо N запросов)

**Установка на сервере ЛЭРС:**
1. Распаковать архив на сервере
2. В папке `LersReportProxy`: Правой кнопкой мыши на `install.bat` → Запустить от имени администратора
3. Служба будет установлена и запущена на порту **5377**

Скрипт автоматически соберёт и установит Windows Service.

#### LersReportCommon

Общая библиотека для устранения дублирования кода между плагином и прокси-службой.

**Содержит:**
- `Logger.cs` - универсальный файловый логгер
- `ReflectionHelper.cs` - работа с reflection для ЛЭРС API
- `Constants.cs` - общие константы

## Системные требования

- Windows 10/11 или Windows Server 2016+
- .NET Framework 4.8
- .NET SDK 8.0 (для сборки)
- Установленный ЛЭРС УЧЁТ (для плагина)

## Документация

Детальная документация доступна в комментариях к коду и XML-комментариях в исходниках проектов.

## Лицензия

Проприетарное ПО. Все права защищены.

## О системе ЛЭРС УЧЁТ

**ЛЭРС УЧЁТ** - система учёта энергоресурсов (вода, тепло, электричество, газ).

Официальная документация: https://docs.lers.ru/
